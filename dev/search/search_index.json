{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Geist documentation","text":"<p>Geist is a new templating language for declarative data manipulation, query, and report generation. Building on the Jinja2 template engine, Geist is designed to support diverse data backends and query engines via predefined tags and filters, and may be extended with custom tags. A single Geist template may include multiple queries expressed in different languages, e.g. SQL and SPARQL, to leverage the strengths of each for clarity and ease of maintenance. Because Geist both can generate reports in diverse formats and perform inserts and updates on new or existing databases during template expansion, Geist templates may orchestrate data extraction, transformation, and load operations spanning multiple tools and data storage systems. The Geist Python package can be installed easily and accessed via the command line. If your dataset is stored in DuckDB and SPARQL queries are more suitable for your problem, then Geist might be for you! Check out our Poster for SciPy 2024!</p> <p>At the moment, Geist supports DuckDB and RDFLib. More types of data backends will be available in the near future.</p>"},{"location":"#features","title":"Features","text":"<p>Both CLI and Python API are provided for the following features:</p> <ul> <li>report feature CLI: expand a report using dataset(s)</li> <li>create feature CLI: create a new dataset</li> <li>destroy feature CLI: delete a dataset</li> <li>export feature CLI: export a graph</li> <li>graph feature CLI: visualize a dataset</li> <li>load feature CLI: import data into a dataset</li> <li>query feature CLI: perform a query on a dataset</li> </ul>"},{"location":"#demo-for-scipy-2024","title":"Demo for SciPy 2024","text":"<p>A Geist report that employs two different query languages. We demonstrate how Geist can be used to extract triples from a relational database, store them as a RDF dataset, and perform SPARQL queries on it. Instead of purely in-memory operations, Geist can be used to migrate data. With the hamming numbers dataset stored in DuckDB as an input, we generate a report to describe the original dataset and the subgraph extracted via SQL and SPARQL queries using a single Geist script.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#v021","title":"v0.2.1","text":"<ul> <li>Add the Geist Poster for SciPy 2024</li> <li>Update the documentation: add descriptions for the demo of SciPy 2024</li> </ul>"},{"location":"changelog/#v020","title":"v0.2.0","text":"<ul> <li>SQL queries are supported by GEIST based on duckdb</li> <li>Update ContainerTag: return objects of any type, not just strings</li> </ul>"},{"location":"changelog/#v010","title":"v0.1.0","text":"<ul> <li>Add documentation</li> <li>Add the component tag to extract connected components of a given graph</li> <li>Add the process_str_for_html filter</li> <li>Make the map tag more flexible: make it possible to map selected columns</li> <li>Fix the quotes bug: keep the cell's original format</li> </ul>"},{"location":"changelog/#v001","title":"v0.0.1","text":"<ul> <li>The first version of GEIST with create, load, query, destroy, graph, graph2, map, use, html, img, and table tags</li> <li>SPARQL queries are supported by GEIST based on RDFLib</li> </ul>"},{"location":"setup/","title":"Setup","text":"<p>Before installing Geist, please make sure Graphviz is installed. </p> Example: GitHub Codespaces <pre><code>sudo apt-get update &amp;&amp; sudo apt-get install -y graphviz graphviz-dev\n</code></pre> Example: Google Colab (Jupyter Notebook) <pre><code>apt install libgraphviz-dev\n</code></pre> <p>Install Geist: <pre><code>pip install geist-p\n</code></pre></p> <p>To check Geist is working, run <code>geist</code> in the command line. You should get the following output: <pre><code>Usage: geist [OPTIONS] COMMAND [ARGS]...\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  create   Create a new dataset\n  destroy  Delete a dataset\n  export   Export a dataset\n  graph    Visualize a dataset\n  load     Import data into a dataset\n  query    Perform a query on a dataset\n  report   Expand a report using dataset(s)\n</code></pre></p>"},{"location":"commands/create/","title":"Command create","text":"<p>create command can create a new dataset. A <code>.duckdb</code> or a <code>.pkl</code> file will be created under the <code>.geistdata/duckdb</code> or the <code>.geistdata/rdflib</code> folder with the same name of this dataset.</p> <p>There are two subcommands for create: <pre><code>Usage: geist create [OPTIONS] COMMAND [ARGS]...\n\nCreate a new dataset\n\nOptions:\n--help  Show this message and exit.\n\nCommands:\nduckdb  Create a new SQL dataset using DuckDB\nrdflib  Create a new RDF dataset using RDFLib\n</code></pre></p> CLI: duckdbCLI: rdflibGeist Template <pre><code>Usage: geist create duckdb [OPTIONS]\n\nCreate a new SQL dataset using DuckDB\n\nOptions:\n-d, --dataset TEXT              Name of SQL dataset to create (default \"kb\")\n-ifile, --inputfile FILENAME    Path of the file to be loaded as a Pandas\n                                DataFrame  [required]\n-iformat, --inputformat [csv|json]\n                                Format of the file to be loaded as a Pandas\n                                DataFrame (default csv)\n-t, --table TEXT                Name of the table to be created (default\n                                \"df\")\n--help                          Show this message and exit.\n</code></pre> Example 1: create a <code>test</code> SQL dataset from stdin <pre><code>geist create duckdb --dataset test --inputformat csv --table df &lt;&lt; __END_INPUT__\nv1,v2,v3\n1,2,3\n4,5,6\n7,8,9\n__END_INPUT__\n</code></pre> Example 2: create a <code>test</code> dataset from a file <p>Here is the <code>test.csv</code> file:</p> <pre><code>v1,v2,v3\n1,2,3\n4,5,6\n7,8,9\n</code></pre> <p>Code: <pre><code>geist create duckdb --dataset test --inputfile test.csv --inputformat csv --table df\n</code></pre></p> <pre><code>Usage: geist create rdflib [OPTIONS]\n\nCreate a new RDF dataset\n\nOptions:\n-d, --dataset TEXT              Name of RDF dataset to create (default \"kb\")\n-ifile, --inputfile FILENAME    Path of the file to be loaded as triples\n                                [required]\n-iformat, --inputformat [xml|n3|turtle|nt|pretty-xml|trix|trig|nquads|json-ld|hext|csv]\n                                Format of the file to be loaded as triples\n                                (default json-ld)\n--colnames TEXT                 Column names of triples with the format of\n                                [[subject1, predicate1, object1], [subject2,\n                                predicate2, object2], ...] when the input\n                                format is csv\n--infer [none|rdfs|owl|rdfs_owl]\n                                Inference to perform on update [none, rdfs,\n                                owl, rdfs_owl] (default \"none\")\n--help                          Show this message and exit.\n</code></pre> Example 1: create a <code>test</code> RDF dataset from stdin <pre><code>geist create rdflib --dataset test --inputformat nt --infer none &lt;&lt; __END_INPUT__\n\n&lt;http://example.com/drewp&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; .\n&lt;http://example.com/drewp&gt; &lt;http://example.com/says&gt; \"Hello World\" .\n\n__END_INPUT__\n</code></pre> Example 2: create a <code>test</code> dataset from a file <p>Here is the <code>test.nt</code> file:</p> <p><pre><code>&lt;http://example.com/drewp&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; .\n&lt;http://example.com/drewp&gt; &lt;http://example.com/says&gt; \"Hello World\" .\n</code></pre> Code: <pre><code>geist create rdflib --dataset test --inputfile test.nt --inputformat nt --infer none\n</code></pre></p> <p>test 1</p>"},{"location":"commands/destroy/","title":"Command destroy","text":"<p>destroy command can delete a dataset. The <code>.duckdb</code> or the <code>.pkl</code> file of the corresponding dataset will be discarded.</p> <p>There are two subcommands for destroy: <pre><code>Usage: geist destroy [OPTIONS] COMMAND [ARGS]...\n\n  Delete a dataset\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  duckdb  Delete a SQL dataset\n  rdflib  Delete an RDF dataset\n</code></pre></p> CLI: duckdbCLI: rdflibGeist Template <pre><code>Usage: geist destroy duckdb [OPTIONS]\n\nDelete a SQL dataset\n\nOptions:\n-d, --dataset TEXT  Name of SQL dataset to be removed (default \"kb\")\n-q, --quiet         Suppress error messages if the provided dataset does not\n                    exist\n--help              Show this message and exit.\n</code></pre> Example: delete the <code>test</code> dataset <pre><code>geist destroy duckdb --dataset test\n</code></pre> <p>The <code>.geistdata/duckdb/test.duckdb</code> file will be removed after this operation. By default, you will get an error message if the provided dataset (in this case, it is the <code>test</code> dataset) does not exist. To suppress this error message, you can add <code>--quiet</code>:</p> <pre><code>geist destroy duckdb --dataset test --quiet\n</code></pre> <pre><code>Usage: geist destroy rdflib [OPTIONS]\n\nDelete an RDF dataset\n\nOptions:\n-d, --dataset TEXT  Name of RDF dataset to be removed (default \"kb\")\n-q, --quiet         Suppress error messages if the provided dataset does not\n                    exist\n--help              Show this message and exit.\n</code></pre> Example: delete the <code>test</code> dataset <pre><code>geist destroy rdflib --dataset test\n</code></pre> <p>The <code>.geistdata/rdflib/test.pkl</code> file will be removed after this operation. By default, you will get an error message if the provided dataset (in this case, it is the <code>test</code> dataset) does not exist. To suppress this error message, you can add <code>--quiet</code>:</p> <pre><code>geist destroy rdflib --dataset test --quiet\n</code></pre> <p>Check the destroy tag.</p>"},{"location":"commands/export/","title":"Command export","text":"<p>export command can export a dataset.</p> <p>There are two subcommands for export: <pre><code>Usage: geist export [OPTIONS] COMMAND [ARGS]...\n\n  Export a dataset\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  duckdb  Export a SQL dataset\n  rdflib  Export an RDF dataset\n</code></pre></p> CLI: duckdbCLI: rdflib <pre><code>Usage: geist export duckdb [OPTIONS]\n\nExport a SQL dataset\n\nOptions:\n-d, --dataset TEXT              Name of SQL dataset to be exported (default\n                                \"kb\")\n-oroot, --outputroot TEXT       Path of the directory to store the exported\n                                table (default: current directory). If the\n                                given path (i.e., --outputfile) is None or a\n                                relative path, it will be ignored.\n-ofile, --outputfile TEXT       Path of the file to store the exported table\n                                (default: None)\n-oformat, --outputformat [csv|json]\n                                Format of the exported table (default csv)\n-t, --table TEXT                Name of the table to be exported (default\n                                \"df\")\n--help                          Show this message and exit.\n</code></pre> Example: export the <code>df</code> table in <code>test</code> dataset <p>By default, the exported table will be printed in terminal: <pre><code>geist export duckdb --dataset test --table df\n</code></pre></p> <pre><code>Usage: geist export rdflib [OPTIONS]\n\nExport an RDF dataset\n\nOptions:\n-d, --dataset TEXT              Name of RDF dataset to be exported (default\n                                \"kb\")\n-oroot, --outputroot TEXT       Path of the directory to store these\n                                exported triples (default: current\n                                directory). If the given path (i.e.,\n                                --outputfile) is None or a relative path, it\n                                will be ignored.\n-ofile, --outputfile TEXT       Path of the file to store these exported\n                                triples (default: None)\n-oformat, --outputformat [json-ld|n3|nquads|nt|hext|pretty-xml|trig|trix|turtle|longturtle|xml]\n                                Format of the exported triples (default nt)\n--help                          Show this message and exit.\n</code></pre> Example: export the <code>test</code> dataset <p>By default, the exported triples will be printed in terminal: <pre><code>geist export rdflib --dataset test\n</code></pre></p>"},{"location":"commands/graph/","title":"Command graph","text":"<p>graph command can visualize a dataset. Only <code>rdflib</code> is supported for now.</p> <pre><code>Usage: geist graph [OPTIONS] COMMAND [ARGS]...\n\n  Visualize a dataset\n\nOptions:\n  --help  Show this message and exit.\n</code></pre> CLI: rdflibGeist Template <pre><code>Usage: geist graph rdflib [OPTIONS]\n\nVisualize an RDF dataset\n\nOptions:\n-d, --dataset TEXT              Name of RDF dataset to be visualized\n                                (default \"kb\")\n-r, --rankdir [TB|BT|LR|RL]     Direction of the graph (default TB): TB or\n                                BT or LR or RL\n-m, --mappings TEXT             File of the mappings to shorten text (str):\n                                path of a JSON file, where the key is the\n                                original text and the value is the shorter\n                                text.\n-on, --on TEXT                  Column(s) to be mapped.\n-sc, --samecolor                Use the same color for same edges.\n-oroot, --outputroot TEXT       Path of the directory to store the graph\n                                (default: current directory). If the given\n                                path (i.e., --outputfile) is a relative\n                                path, it will be ignored.\n-ofile, --outputfile TEXT       Path of the file without extension to store\n                                the graph (default: res)\n-oformat, --outputformat [none|svg|png|gv]\n                                Format of the graph (default: none): none or\n                                svg or png or gv\n--help                          Show this message and exit.\n</code></pre> Example: visualize the <code>test</code> dataset <pre><code>geist graph rdflib --dataset test --outputformat svg \n</code></pre> <p>Check the graph tag.</p>"},{"location":"commands/load/","title":"Command load","text":"<p>load command can import data into an existing dataset.</p> <p>There are two subcommands for load: <pre><code>Usage: geist load [OPTIONS] COMMAND [ARGS]...\n\nImport data into a dataset\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  duckdb  Import data into a SQL dataset\n  rdflib  Import data into a RDF dataset\n</code></pre></p> CLI: duckdbCLI: rdflibGeist Template <pre><code>Usage: geist load duckdb [OPTIONS]\n\nImport data into a SQL dataset\n\nOptions:\n-d, --dataset TEXT              Name of SQL dataset to load a file (default\n                                \"kb\")\n-ifile, --inputfile FILENAME    Path of the file to be loaded as a table\n                                [required]\n-iformat, --inputformat [csv|json]\n                                Format of the file to be loaded as a table\n                                (default csv)\n-t, --table TEXT                Name of the table to be created  [required]\n--help                          Show this message and exit.\n</code></pre> Example: load a file into the <code>test</code> dataset <pre><code>geist load duckdb --dataset test --inputfile test_add.csv --inputformat csv --table df\n</code></pre> <p>Here are options of the load command: <pre><code>Usage: geist load rdflib [OPTIONS]\n\nImport data into a RDF dataset\n\nOptions:\n-d, --dataset TEXT              Name of RDF dataset to load a file (default\n                                \"kb\")\n-ifile, --inputfile FILENAME    Path of the file to be loaded as triples\n                                [required]\n-iformat, --inputformat [xml|n3|turtle|nt|pretty-xml|trix|trig|nquads|json-ld|hext|csv]\n                                Format of the file to be loaded as triples\n                                (default json-ld)\n--colnames TEXT                 Column names of triples with the format of\n                                [[subject1, predicate1, object1], [subject2,\n                                predicate2, object2], ...] when the input\n                                format is csv\n--help                          Show this message and exit.\n</code></pre></p> Example: load a file into the <code>test</code> dataset <pre><code>geist load rdflib --dataset test --inputfile test_add.jsonld\n</code></pre> <p>Check the load tag.</p>"},{"location":"commands/query/","title":"Command query","text":"<p>query command can perform a query on a dataset.</p> <p>There are two subcommands for query: <pre><code>Usage: geist query [OPTIONS] COMMAND [ARGS]...\n\n  Perform a query on a dataset\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  duckdb  Perform a SQL query on a dataset\n  rdflib  Perform a SPARQL query on a dataset\n</code></pre></p> CLI: duckdbCLI: rdflibGeist Template <pre><code>Usage: geist query duckdb [OPTIONS]\n\nPerform a SQL query on a dataset\n\nOptions:\n-d, --dataset TEXT            Name of RDF dataset to be queried (default\n                                \"kb\")\n-ifile, --inputfile FILENAME  Specify either the path of the file containing\n                                the SQL query to execute or provide the SQL\n                                query itself via stdin  [required]\n-oroot, --outputroot TEXT     Path of the directory to store the query\n                                results (default: current directory). If the\n                                given path (i.e., --outputfile) is None or a\n                                relative path, it will be ignored.\n-ofile, --outputfile TEXT     Path of the file to store the query results\n                                (default: None)\n--help                        Show this message and exit.\n</code></pre> Example 1: all rows of the <code>df</code> table in <code>test</code> dataset from stdin <pre><code>geist query duckdb --dataset test &lt;&lt; __END_QUERY__\n\nSELECT * FROM df\n\n__END_QUERY__\n</code></pre> Example 2: all rows of the <code>test</code> dataset from a query file <pre><code>geist query duckdb --dataset test --inputfile query_file\n</code></pre> <p>Here is the query_file's content: <pre><code>SELECT * FROM df\n</code></pre></p> <pre><code>Usage: geist query rdflib [OPTIONS]\n\nPerform a SPARQL query on a dataset\n\nOptions:\n-d, --dataset TEXT            Name of RDF dataset to be queried (default\n                                \"kb\")\n-ifile, --inputfile FILENAME  Specify either the path of the file containing\n                                the SPARQL query to execute or provide the\n                                SPARQL query itself via stdin  [required]\n-oroot, --outputroot TEXT     Path of the directory to store the query\n                                results (default: current directory). If the\n                                given path (i.e., --outputfile) is None or a\n                                relative path, it will be ignored.\n-ofile, --outputfile TEXT     Path of the file to store the query results\n                                (default: None)\n--help                        Show this message and exit.\n</code></pre> Example 1: all triples of the <code>test</code> dataset from stdin <pre><code>geist query rdflib --dataset test &lt;&lt; __END_QUERY__\n\nSELECT ?s ?p ?o\nWHERE {\n    ?s ?p ?o\n}\nORDER BY ?s ?p ?o\n\n__END_QUERY__\n</code></pre> Example 2: all triples of the <code>test</code> dataset from a query file <pre><code>geist query rdflib --dataset test --inputfile query_file\n</code></pre> <p>Here is the query_file's content: <pre><code>SELECT ?s ?p ?o\nWHERE {\n    ?s ?p ?o\n}\nORDER BY ?s ?p ?o\n</code></pre></p> <p>Check the query tag.</p>"},{"location":"commands/report/","title":"Report Command Introduction","text":"<p>report command can expand a report (Geist template) using a dataset.</p>"},{"location":"commands/report/#how-to-execute-expand-a-geist-template","title":"How to execute (expand) a Geist template?","text":"CLIPython API <p>Here are options of the report command: <pre><code>Usage: geist report [OPTIONS]\n\nExpand a report using datasets\n\nOptions:\n-ifile, --inputfile FILENAME   Path of the file containing the report\n                                template to expand  [required]\n-oroot, --outputroot TEXT      Path of the directory to store the expanded\n                                report (default: current directory)\n-so, --suppressoutput BOOLEAN  Suppress output or not (default: False)\n--help                         Show this message and exit.\n</code></pre></p> Example 1: expand a report from stdin <pre><code>geist report &lt;&lt; END_TEMPLATE\n\n{% create \"test\", datastore=\"rdflib\", inputformat=\"nt\", isfilepath=False %}\n    &lt;http://example.com/drewp&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; .\n    &lt;http://example.com/drewp&gt; &lt;http://example.com/says&gt; \"Hello World\" .\n{% endcreate %}\n\n{% query \"test\", datastore=\"rdflib\", isfilepath=False as all_triples %}\n    SELECT ?s ?p ?o\n    WHERE {\n        ?s ?p ?o\n    }\n    ORDER BY ?s ?p ?o\n{% endquery %}\n\n{% for _, row in all_triples.iterrows() %}\n    Subject: {{ row[\"s\"] }}, Predicate: {{ row[\"p\"] }}, Object: {{ row[\"o\"] }}.\n{% endfor %}\n\n{% destroy \"test\", datastore=\"rdflib\" %}\n\nEND_TEMPLATE\n</code></pre> Example 2: expand a report from a file <pre><code>geist report --inputfile report.geist\n</code></pre> <p>Here is the report.geist file: <pre><code>{% create \"test\", datastore=\"rdflib\", inputformat=\"nt\", isfilepath=False %}\n    &lt;http://example.com/drewp&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; .\n    &lt;http://example.com/drewp&gt; &lt;http://example.com/says&gt; \"Hello World\" .\n{% endcreate %}\n\n{% query \"test\", datastore=\"rdflib\", isfilepath=False as all_triples %}\n    SELECT ?s ?p ?o\n    WHERE {\n        ?s ?p ?o\n    }\n    ORDER BY ?s ?p ?o\n{% endquery %}\n\n{% for _, row in all_triples.iterrows() %}\n    Subject: {{ row[\"s\"] }}, Predicate: {{ row[\"p\"] }}, Object: {{ row[\"o\"] }}.\n{% endfor %}\n\n{% destroy \"test\", datastore=\"rdflib\" %}\n</code></pre></p> <p>Parameters description for geist.report:</p> Name Type Description Default inputfile string A report to be expanded required isinputpath bool True if the inputfile is the file path, otherwise the inputfile is the content <code>False</code> outputroot string Path of the directory to store the expanded report current directory, i.e., <code>./</code> suppressoutput bool True to suppress output <code>True</code> Example 1: expand a report from a string <pre><code>from geist import report\n\nreport_template = \"\"\"\n\n{% create \"test\", datastore=\"rdflib\", inputformat=\"nt\", isfilepath=False %}\n    &lt;http://example.com/drewp&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; .\n    &lt;http://example.com/drewp&gt; &lt;http://example.com/says&gt; \"Hello World\" .\n{% endcreate %}\n\n{% query \"test\", datastore=\"rdflib\", isfilepath=False as all_triples %}\n    SELECT ?s ?p ?o\n    WHERE {\n        ?s ?p ?o\n    }\n    ORDER BY ?s ?p ?o\n{% endquery %}\n\n{% for _, row in all_triples.iterrows() %}\n    Subject: {{ row[\"s\"] }}, Predicate: {{ row[\"p\"] }}, Object: {{ row[\"o\"] }}.\n{% endfor %}\n\n{% destroy \"test\", datastore=\"rdflib\" %}\n\n\"\"\"\n\n# Return the expanded report as a string variable named expanded_report\nexpanded_report = report(inputfile=report_template)\n</code></pre> Example 2: expand a report from a file <pre><code>from geist import report\n\n# Return the expanded report as a string variable named expanded_report\nexpanded_report = report(inputfile='report.geist', isinputpath=True)\n</code></pre> <p>Here is the report.geist file: <pre><code>{% create \"test\", datastore=\"rdflib\", inputformat=\"nt\", isfilepath=False %}\n    &lt;http://example.com/drewp&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; .\n    &lt;http://example.com/drewp&gt; &lt;http://example.com/says&gt; \"Hello World\" .\n{% endcreate %}\n\n{% query \"test\", datastore=\"rdflib\", isfilepath=False as all_triples %}\n    SELECT ?s ?p ?o\n    WHERE {\n        ?s ?p ?o\n    }\n    ORDER BY ?s ?p ?o\n{% endquery %}\n\n{% for _, row in all_triples.iterrows() %}\n    Subject: {{ row[\"s\"] }}, Predicate: {{ row[\"p\"] }}, Object: {{ row[\"o\"] }}.\n{% endfor %}\n\n{% destroy \"test\", datastore=\"rdflib\" %}\n</code></pre></p>"}]}